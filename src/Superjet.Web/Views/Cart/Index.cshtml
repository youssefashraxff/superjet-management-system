@model Superjet.Web.Models.Cart
@{
    Layout = null;
}
@functions {
    string GetModelColor(string model)
    {
        return model switch
        {
            "Economy" => "bg-gray-300 text-blue-800",
            "Premium" => "bg-blue-800 text-white",
            "Elite" => "bg-yellow-600 text-white",
            _ => "bg-gray-300 text-gray-800"
        };
    }
}
<div class="sticky p-5 bg-white border border-gray-200 rounded-lg shadow-sm top-4">

    <h3 class="mb-6 font-bold text-gray-900">Your Tickets:</h3>

    <div id="ticket-summary">
        @if (Model == null || !Model.Items.Any())
        {
            <p class="text-sm text-gray-400">No tickets selected yet.</p>
        }
        else
        {
            @foreach (var item in Model.Items)
            {
                
                    <div class="flex flex-col gap-1 p-4 border border-gray-200 rounded-lg">
                        <div class="flex justify-between">
                            <span class="px-2 py-1 text-xs font-medium @GetModelColor(item.Route.Bus.Model) rounded-tr-md rounded-bl-md w-fit">
                            @item.Route.Bus.Model Bus
                        </span>
                        <button
                            class="remove-cart-item"
                            data-id="@item.Id">
                            <i class="p-1 px-2 text-red-600 rounded-full fas fa-xmark hover:bg-red-400"></i>
                        </button>
                        </div>
                        <!-- Times -->
                        <div class="flex items-center gap-2 font-semibold text-gray-700 text-md">
                            <p>@item.Route.DepartureTime.ToString("hh:mm tt")</p>
                            <div class="flex items-center">
                                <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
                                <div class="w-10 h-px bg-gray-400"></div>
                                <div class="w-1 h-1 border border-gray-400 rounded-full"></div>
                            </div>
                            <p>@item.Route.ArrivalTime.ToString("hh:mm tt")</p>
                        </div>

                        <p class="text-xs text-gray-400">
                            @item.Route.DepartureTime.ToString("dddd dd/MM/yyyy")
                        </p>

                        <p class="text-xs text-gray-600">
                            <span>
                                @item.Route.Origin <i class="fas fa-arrow-right"></i> @item.Route.Destination
                            </span>
                        </p>

                        <p class="flex justify-between">
                            <span>Ticket x @item.Quantity</span>
                            <span>@(item.Route.Price * item.Quantity) EGP</span>
                        </p>
                    </div>
                    <hr class="!mt-3 border-gray-200" />

                    
                
            }
        }
    </div>

    <hr class="mt-4 border-gray-200" />

    <div class="mt-4">
        <label for="discountCode" class="block mb-1 text-sm font-medium text-gray-700">
            Discount Code
        </label>
        <div class="flex items-center gap-2">
            <div class="relative flex-1">
                <input
                    type="text"
                    id="discountCode"
                    placeholder="Enter discount code"
                    class="w-full px-3 py-2 pr-8 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />

                <i id="discount-success-icon"
                   class="absolute hidden text-green-600 -translate-y-1/2 fas fa-check right-2 top-1/2"></i>
            </div>

            <button
                type="button"
                class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md apply-discount hover:bg-green-700">
                Apply
            </button>
        </div>
        <p id="discount-message" class="hidden mt-1 text-xs text-red-500"></p>
    </div>

    @if (Model?.Discount != null)
    {
        <div class="flex justify-between mt-2 text-sm text-gray-500">
            <span>Subtotal</span>
            <span class="line-through">
                @(Model.Items.Sum(i => i.Route.Price * i.Quantity)) EGP
            </span>
        </div>
    }

    <h4 class="flex justify-between mt-1 font-semibold text-gray-900">
        <span>Total</span>
        <span>@(Model?.TotalPrice ?? 0) EGP</span>
    </h4>

    <button
        class="w-full px-4 py-2 mt-2 font-medium text-white bg-blue-600 rounded-md checkout-tickets">
        Checkout
    </button>
</div>
